@page "/"
@using OpenLayers.Blazor

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<OpenStreetMap @ref="_map" Style="height: 800px; width: 800px;"/>

@code{
    private OpenStreetMap _map = null!;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            const string data = """{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"MultiLineString","coordinates":[[[-19.23389327712357,64.03242853470147,591.5390625],[-19.23266432248056,64.03170995414257,594.23046875],[-19.231845075264573,64.03081158176064,596.734375],[-19.231845075264573,64.02973358519375,597.26953125],[-19.231845075264573,64.0284759644419,597.72265625],[-19.23143536783755,64.027397967875,597.22265625],[-19.23143536783755,64.02614034712315,596.51953125],[-19.23143536783755,64.02506235055625,595.91796875],[-19.23143536783755,64.02362510561943,596.328125],[-19.231025744229555,64.02254710905254,596.62109375],[-19.230616120621562,64.02146911248565,596.69921875],[-19.229796873405576,64.02057082392275,599.92578125],[-19.228977542370558,64.01967253535986,602.92578125],[-19.22774867154658,64.01877416297793,605.40625],[-19.22692934051156,64.01787587441504,608.734375],[-19.22570038586855,64.01715721003711,612.16015625],[-19.22447151504457,64.01625892147422,619.234375],[-19.223652184009552,64.01536054909229,627.75390625],[-19.222423313185573,64.0146419685334,636.54296875],[-19.221603982150555,64.01374359615147,646.33203125],[-19.220375111326575,64.01302493177354,652.2109375],[-19.219146156683564,64.01194701902568,661.078125],[-19.21750757843256,64.01122835464776,670.4765625],[-19.21627862378955,64.01050969026983,680.1484375],[-19.21504975296557,64.0097910258919,695.4921875],[-19.21423042193055,64.008892737329,711.65625],[-19.213001551106572,64.00817407295108,726.3984375],[-19.211362972855568,64.00763503275812,744.8984375],[-19.209724394604564,64.00691645219922,769.2265625],[-19.208495439961553,64.00619778782129,789.359375],[-19.20726648531854,64.00547912344337,802.19921875],[-19.206037614494562,64.00476045906544,809.53515625],[-19.204399036243558,64.00404179468751,817.03515625],[-19.203170081600547,64.00314350612462,820.98046875],[-19.201531503349543,64.00260446593165,822.703125],[-19.19989292509854,64.00188588537276,829.85546875],[-19.198254430666566,64.0013468451798,836.62109375],[-19.19661585241556,64.00080788880587,842.265625],[-19.194977274164557,64.00008922442794,842.92578125],[-19.193338695913553,63.99955026805401,840.3984375],[-19.192109741270542,63.99883160367608,832.265625],[-19.191290494054556,63.997933231294155,831.62890625],[-19.190061539411545,63.99721465073526,842.1328125],[-19.188832584768534,63.99649598635733,853.85546875],[-19.187603713944554,63.9957773219794,865.75],[-19.186784382909536,63.99487903341651,871.57421875],[-19.185555512085557,63.99416036903858,880.75],[-19.184326557442546,63.993441704660654,892.04296875],[-19.183097602799535,63.992723040282726,902.40234375],[-19.181868731975555,63.99182475171983,920.44140625],[-19.181049400940537,63.991106087341905,926.5234375],[-19.18023015372455,63.99002809077501,922.44921875],[-19.179410822689533,63.98895009420812,915.015625],[-19.178591575473547,63.98805180564523,908.40625],[-19.178181951865554,63.987153517082334,905.15234375],[-19.17777224443853,63.98625514470041,902.63671875],[-19.179410822689533,63.985895812511444,894.26953125],[-19.18023015372455,63.985177148133516,888.62890625],[-19.181868731975555,63.984817899763584,885.2890625],[-19.18350731022656,63.98427885957062,886.21484375],[-19.185145804658532,63.98391952738166,895.59375],[-19.186784382909536,63.983560195192695,908.31640625],[-19.18842296116054,63.983021238818765,918.38671875],[-19.190061539411545,63.982482282444835,927.984375],[-19.19170011766255,63.98194324225187,934.57421875],[-19.193338695913553,63.981224577873945,932.14453125],[-19.194977274164557,63.980685621500015,931.91796875],[-19.195796521380544,63.97996695712209,923.875],[-19.197435099631548,63.979607624933124,918],[-19.199073677882552,63.979068668559194,909.73046875],[-19.200712256133556,63.97852962836623,899.9296875],[-19.20235083438456,63.97817029617727,893.40625],[-19.203989412635565,63.97763133980334,891.0859375],[-19.20562799088657,63.977272007614374,893.09765625],[-19.20726648531854,63.97691267542541,896.25],[-19.208905063569546,63.97637371905148,894.75],[-19.21054364182055,63.97583467885852,890.94140625],[-19.211362972855568,63.97511609829962,882.734375],[-19.213001551106572,63.974397433921695,876.3203125],[-19.214640045538545,63.97385839372873,871.80078125],[-19.21627862378955,63.97349906153977,870.09375],[-19.218326825648546,63.97296010516584,867.265625],[-19.21996540389955,63.97242114879191,861.65234375],[-19.221603982150555,63.972061816602945,857.51171875],[-19.22324256040156,63.971522776409984,852.8046875],[-19.225290762260556,63.97116344422102,848.765625],[-19.22692934051156,63.970804112032056,844.65234375],[-19.228567918762565,63.97044477984309,840.7421875],[-19.230616120621562,63.970265155658126,836.53125],[-19.23266432248056,63.96990582346916,832.12890625],[-19.234302900731564,63.9695464912802,830.17578125],[-19.23635110259056,63.96936686709523,829.66796875],[-19.23839930444956,63.969187159091234,832.19140625],[-19.24085721373558,63.969187159091234,835.7578125],[-19.242905415594578,63.96990582346916,838.73828125],[-19.244543993845582,63.97062448784709,843.12109375],[-19.24659219570458,63.97116344422102,848.16015625],[-19.248230773955584,63.971522776409984,852.42578125],[-19.249869268387556,63.97224144078791,859.734375],[-19.251917554065585,63.972600772976875,866.6015625],[-19.253556048497558,63.97296010516584,873.078125],[-19.25478500314057,63.97367876954377,879.5625],[-19.256833204999566,63.97403810173273,885.5625],[-19.25847178325057,63.974397433921695,890.9296875],[-19.260110361501575,63.97511609829962,897.11328125],[-19.261339316144586,63.97583467885852,902.75390625],[-19.263387518003583,63.97619401104748,906.1640625],[-19.26420676521957,63.97691267542541,908.55078125],[-19.265845343470573,63.97763133980334,908.3671875],[-19.267483921721578,63.9779906719923,903.0625],[-19.26871287636459,63.97870933637023,898.84765625],[-19.270761078223586,63.979068668559194,890.1875],[-19.271989949047565,63.97978733293712,885.2109375],[-19.274038234725595,63.98050591349602,881.48828125],[-19.275676729157567,63.98086524568498,884.05078125],[-19.27813463844359,63.98086524568498,889.25],[-19.28059246391058,63.98086524568498,897.109375],[-19.28305028937757,63.980685621500015,901.8046875],[-19.285508198663592,63.98032628931105,906.71484375],[-19.287146776914597,63.97978733293712,908.8984375],[-19.289604602381587,63.97924829274416,917.58203125],[-19.29124318063259,63.97870933637023,922.03515625],[-19.29329138249159,63.978350004181266,922.4296875],[-19.295339584350586,63.97763133980334,917.8984375],[-19.297387786209583,63.97691267542541,911.109375],[-19.299026364460588,63.97637371905148,904.69140625],[-19.30066494271159,63.97583467885852,898.328125],[-19.301484189927578,63.97511609829962,889.703125],[-19.303122768178582,63.97475676611066,885.94921875],[-19.304761346429586,63.9742177259177,881.02734375],[-19.30639992468059,63.97367876954377,878.23046875],[-19.308038502931595,63.973139729350805,878.9453125],[-19.3096770811826,63.972600772976875,876.5078125],[-19.311315659433603,63.97188210859895,869.3125],[-19.312954237684608,63.97134315222502,865.234375],[-19.313773484900594,63.97062448784709,858.4296875],[-19.315412063151598,63.970265155658126,858.90625],[-19.316231310367584,63.9695464912802,856.44140625],[-19.317050641402602,63.96882782690227,849.515625],[-19.31786988861859,63.96774991415441,832.82421875],[-19.318689219653606,63.96703124977648,821.046875],[-19.32032779790461,63.966312585398555,809.8671875],[-19.321966292336583,63.96577354520559,801.4140625],[-19.3227856233716,63.9650549646467,802.64453125],[-19.324424201622605,63.96469563245773,800.89453125],[-19.32606277987361,63.96415659226477,796.17578125],[-19.327701358124614,63.96379726007581,790.41015625],[-19.329339852556586,63.96325830370188,784.46875],[-19.331388138234615,63.96253963932395,779.578125],[-19.333026632666588,63.96200068295002,776.56640625],[-19.333845963701606,63.96128201857209,784.0703125],[-19.33548454195261,63.96092268638313,786.87890625],[-19.336303789168596,63.9602040220052,792.05078125],[-19.3379423674196,63.95966506563127,791.37890625],[-19.339580945670605,63.95912602543831,788.78125],[-19.34121952392161,63.958766693249345,784.15234375],[-19.342038771137595,63.95804802887142,784.54296875],[-19.3436773493886,63.957688780501485,782.0234375],[-19.345315927639604,63.95732944831252,782.79296875],[-19.3473641294986,63.95714974030852,781.0390625],[-19.3494123313576,63.95679040811956,783.390625],[-19.351050909608603,63.95625145174563,786.46484375],[-19.352689487859607,63.955892119556665,786.30078125],[-19.35432806611061,63.955353163182735,785.953125],[-19.355966644361615,63.954814122989774,783.91796875],[-19.3567858915776,63.954095458611846,783.83203125],[-19.358424469828606,63.953556502237916,779.875],[-19.359243800863624,63.95283783785999,780.8203125],[-19.36006304807961,63.95211917348206,780.93359375],[-19.360882379114628,63.95140050910413,780.203125],[-19.360882379114628,63.95104117691517,780.4921875]]]},"properties":{"name":"Track"}}]}""";
            foreach (var dataStrings in new List<string>{data})
            {
                await _map.AddLayer(new Layer()
                {
                    LayerType = LayerType.Vector,
                    SourceType = SourceType.VectorGeoJson,
                    Data = dataStrings,
                    StyleCallback = GetStyleCallback,
                });
            }
            StateHasChanged();
        }
    }

    private static StyleOptions GetStyleCallback(Shape arg)
    {
        return new StyleOptions
        {
            Stroke = new StyleOptions.StrokeOptions
            {
                Color = "red",
                Width = 3
            }
        };
    }
}
